/* ============================================
   SIDEBAR COMPONENT STYLES
   Professional & Clean Design
   ============================================ */

/* 
 * Z-INDEX HIERARCHY FOR THE APPLICATION:
 * =======================================
 * z-0     : Main content area (default layer)
 * z-10    : Sticky header/navbar
 * z-30    : Mobile sidebar overlay backdrop
 * z-40    : Sidebar navigation
 * z-50    : Dropdowns, tooltips, popovers
 * z-[1000-2999] : Reserved for future use
 * z-[3000+] : Modals and overlays (Create Event, Participants, Evaluations, etc.)
 * 
 * IMPORTANT: Always use z-index >= 3000 for any modal dialogs to ensure they appear above all navigation elements.
 */

/* Prevent horizontal scrollbar during sidebar transitions */
:host {
	display: block;
	overflow-x: hidden;
}

/* Mobile Sidebar Behavior */
@media (max-width: 1023.98px) {
	:host ::ng-deep body.sidebar-open {
		overflow: hidden;
	}
}

/* Ensure the sidebar doesn't take full width on very small devices */
.max-w-\[90vw\] {
	max-width: 90vw;
}

/* Fallbacks for blur and opacity utilities */
.bg-black\/60 { background-color: rgba(0,0,0,0.6); }
.blur-sm { filter: blur(4px); }
.backdrop-blur-sm { backdrop-filter: blur(4px); }

/* Improved overlay transition */
.opacity-0 {
	opacity: 0;
}

.opacity-100 {
	opacity: 1;
}

.pointer-events-none {
	pointer-events: none;
}

/* Active state for sidebar items - Clean Professional Design */
.sidebar-item-active {
	font-weight: 600 !important;
	border-radius: 0.5rem !important;
	background-color: rgba(0, 0, 0, 0.3) !important;
	color: #ffffff !important;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

/* Dropdown nested items active state */
nav .ml-6 .sidebar-item-active,
nav .ml-7 .sidebar-item-active {
	background-color: rgba(0, 0, 0, 0.25) !important;
	font-weight: 500 !important;
}

/* Responsive sidebar width adjustments */
@media (min-width: 640px) and (max-width: 1023px) {
	/* Tablet: slightly wider sidebar */
	.w-72 {
		width: 20rem; /* 320px */
	}
}

@media (max-width: 639px) {
	/* Mobile: optimal width for touch */
	.w-72 {
		width: 18rem; /* 288px */
	}
}

/* Panel content container used as animation anchor
   Allow vertical scrolling by default; only hide overflow during the fade animation. */
.panel-content {
	position: relative; /* ensure absolute-entered hosts are positioned inside */
	overflow-y: auto;   /* allow scrolling of routed content */
	overflow-x: hidden;
	/* Smooth margin + opacity transitions for content shifting when sidebar opens/closes */
	transition: margin-left 300ms cubic-bezier(0.2, 0, 0.2, 1), 
	            opacity 320ms cubic-bezier(0.2, 0, 0.2, 1),
	            width 300ms cubic-bezier(0.2, 0, 0.2, 1),
	            max-width 300ms cubic-bezier(0.2, 0, 0.2, 1);
	opacity: 1;
}

/* Shift the main content on large screens using margin (safer for fixed positioning) */
@media (min-width: 1024px) {
	/* Prevent horizontal overflow when content is shifted by reducing its width
	   to the viewport minus the sidebar width. Using margin + width change
	   avoids layout jank and keeps both sidebar and content fully visible. */
	.panel-content {
		margin-left: 0;
		width: 100%;
		box-sizing: border-box;
		max-width: 100vw;
	}

	.panel-content.content-shift {
		margin-left: 16rem; /* match Tailwind's w-64 (16rem = 256px) */
		width: calc(100% - 16rem);
		max-width: calc(100vw - 16rem);
	}
}

/* Enhanced touch targets for mobile */
@media (max-width: 1023px) {
	nav button,
	nav a {
		-webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
		touch-action: manipulation;
	}
	
	/* Improved scrolling on mobile */
	nav {
		overscroll-behavior: contain;
		-webkit-overflow-scrolling: touch;
	}
}

.panel-content.fading {
	opacity: 0;
	pointer-events: none;
	overflow: hidden; /* prevent visual overflow while fading */
}

