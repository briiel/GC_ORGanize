<div class="p-3 sm:p-6 bg-gray-100 min-h-screen">
	<!-- Header -->
	<div class="mb-6 mx-0 sm:mx-2 lg:mx-6">
			<div class="bg-white rounded-lg shadow-md p-4 sm:p-5"
				 [ngClass]="isOsws ? 'border-l-4 gc-border-admin' : 'border-l-4 gc-border-primary'">
			<div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
				<div class="flex items-center gap-3">
					<div class="w-10 h-10 rounded-lg flex items-center justify-center"
						 [ngClass]="isOsws ? 'gc-bg-admin' : 'gc-bg-primary'">
						<i class="fas fa-archive text-white"></i>
					</div>
					<div>
						<div class="flex items-center gap-2">
							<h1 class="text-xl font-bold text-gray-800">Archive</h1>
							<span class="inline-flex items-center justify-center text-xs font-semibold px-2 py-1 rounded-full bg-gray-100 text-gray-700"
								  *ngIf="filtered && filtered.length >= 0">{{ filtered.length }}</span>
						</div>
						<p class="text-sm text-gray-600">Archived events ready for restore</p>
					</div>
				</div>
				<div class="flex items-center gap-2 w-full sm:w-auto">
					<div class="relative flex-1 sm:flex-none sm:w-[300px]">
						<input
							type="text"
							class="w-full px-4 py-2.5 border-2 border-gray-300 bg-white text-gray-800 placeholder-gray-400 rounded-lg focus:outline-none focus:ring-2 focus:border-transparent transition-all"
							 [ngClass]="isOsws ? 'gc-focus-admin' : 'gc-focus-primary'"
							placeholder="Search archived events..."
							aria-label="Search archive"
							[ngModel]="search"
							(ngModelChange)="onSearchChange($event)"
						/>
					</div>
					<button *ngIf="search" type="button" aria-label="Clear search"
							class="px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-all duration-200 font-semibold border-2 border-gray-300 flex items-center gap-2 min-h-[44px]"
							(click)="search=''">
						<i class="fas fa-times"></i>
						<span class="hidden sm:inline">Clear</span>
					</button>
					<button type="button"
							class="px-4 py-2 rounded-lg transition-colors font-semibold shadow-sm hover:shadow flex items-center gap-2"
							[ngClass]="isOsws ? 'gc-bg-admin' : 'gc-bg-primary'"
							(click)="loadTrash()">
						<i class="fas fa-rotate"></i>
						<span class="hidden sm:inline">Refresh</span>
					</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Loading state -->
	<div *ngIf="loading" role="status" aria-live="polite" class="mx-2 lg:mx-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
		<div *ngFor="let i of [1,2,3,4,5,6]" class="border-2 border-gray-200 rounded-2xl overflow-hidden bg-white shadow-lg">
			<div class="h-36 bg-gray-100 animate-pulse"></div>
			<div class="p-4 space-y-2">
				<div class="h-4 bg-gray-100 rounded w-2/3 animate-pulse"></div>
				<div class="h-3 bg-gray-100 rounded w-1/2 animate-pulse"></div>
				<div class="h-3 bg-gray-100 rounded w-1/3 animate-pulse"></div>
			</div>
		</div>
	</div>

	<!-- Error state -->
	<div *ngIf="error" class="mx-2 lg:mx-6 flex items-start gap-3 p-4 mb-6 rounded-lg border border-red-200 bg-red-50 text-red-700">
		<i class="fas fa-circle-exclamation text-xl mt-0.5"></i>
		<div class="flex-1">
			<div class="font-semibold text-base">Couldn't load archive</div>
			<div class="text-sm mt-1">{{ error }}</div>
		</div>
		<button type="button" 
				class="px-4 py-2 rounded-lg border border-red-300 bg-white hover:bg-red-100 font-semibold transition-colors" 
				(click)="loadTrash()">
			Try again
		</button>
	</div>

	<!-- Empty state -->
	<div *ngIf="!loading && !error && filtered.length === 0" class="text-gray-600 mx-2 lg:mx-6">
		<div class="flex flex-col items-center justify-center text-center py-16 border border-dashed border-gray-300 rounded-lg bg-white shadow-md">
			<div class="w-16 h-16 rounded-lg bg-gray-100 flex items-center justify-center mb-4">
				<i class="fas fa-archive text-3xl text-gray-400"></i>
			</div>
			<div class="text-lg font-semibold text-gray-700 mb-2">No items in archive</div>
			<div class="text-sm text-gray-500 max-w-md">Archived events will appear here. You can restore them or delete them permanently.</div>
		</div>
	</div>

	<!-- Results -->
	<div *ngIf="!loading && !error && filtered.length > 0" class="mx-2 lg:mx-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
		<div *ngFor="let ev of paginated" class="group flex flex-col bg-white rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 border border-gray-200 hover:border-gray-300">
			<div class="h-36 bg-gray-100 bg-cover bg-center relative" [style.backgroundImage]="posterUrl(ev) ? 'url(' + posterUrl(ev) + ')' : ''">
				<div class="absolute inset-0 flex items-center justify-center text-gray-300 text-4xl" *ngIf="!posterUrl(ev)">
					<i class="fas fa-image"></i>
				</div>
				<!-- Status indicator badge -->
				<div class="absolute top-2 left-2 inline-flex items-center gap-1.5 text-xs font-bold px-3 py-1.5 rounded-lg shadow-lg border-2"
					 [ngClass]="{
						'bg-green-100 text-green-800 border-green-300': (ev.status || '').toLowerCase() === 'concluded',
						'bg-yellow-100 text-yellow-800 border-yellow-300': (ev.status || '').toLowerCase() === 'ongoing',
						'bg-gray-100 text-gray-800 border-gray-300': (ev.status || '').toLowerCase() === 'not yet started',
						'bg-red-100 text-red-800 border-red-300': (ev.status || '').toLowerCase() === 'cancelled'
					 }">
					<i class="fas" [ngClass]="{
						'fa-circle-check': (ev.status || '').toLowerCase() === 'concluded',
						'fa-play': (ev.status || '').toLowerCase() === 'ongoing',
						'fa-clock': (ev.status || '').toLowerCase() === 'not yet started',
						'fa-ban': (ev.status || '').toLowerCase() === 'cancelled'
					 }"></i>
					<span class="uppercase tracking-wide">{{ (ev.status || 'unknown') }}</span>
				</div>
			</div>
			<div class="p-4 space-y-3 flex-1">
				<div class="font-bold text-base text-gray-800 truncate"
					 [title]="ev.title">{{ ev.title }}</div>
				<div class="flex gap-3 flex-wrap text-gray-600 text-xs">
					<span class="inline-flex items-center gap-1.5" [title]="ev.start_date | date:'fullDate'">
						<i class="far fa-calendar"></i>
						<span>{{ ev.start_date | date:'mediumDate' }}</span>
					</span>
					<span class="inline-flex items-center gap-1.5 truncate max-w-full" [title]="ev.location || '—'">
						<i class="fas fa-map-marker-alt"></i>
						<span class="truncate">{{ ev.location || '—' }}</span>
					</span>
				</div>
				<div class="flex gap-2 flex-wrap text-gray-700 text-xs">
					<span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-gray-50 border border-gray-200">
						<i class="fas fa-user"></i>
						<span class="truncate">{{ ev.org_name || ev.admin_name || '—' }}</span>
					</span>
					<span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-gray-50 border border-gray-200">
						<i class="fas fa-tag"></i>
						<span>{{ ev.department || '—' }}</span>
					</span>
				</div>
				<div class="text-xs text-gray-500 flex items-center gap-1.5 pt-1">
					<i class="far fa-clock"></i>
					<span>Deleted {{ ev.deleted_at | date:'medium' }}</span>
				</div>
			</div>
			<div class="flex justify-end p-4 gap-2 border-t border-gray-100 bg-gray-50">
				<button type="button" 
						aria-label="Restore event"
						class="px-3 py-2.5 rounded-lg text-white font-semibold transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center"
						[ngClass]="isOsws ? 'gc-bg-admin' : 'gc-bg-primary'"
						(click)="restore(ev.event_id)">
					<i class="fas fa-undo"></i>
				</button>
				<button type="button" 
						aria-label="Delete forever"
						class="px-3 py-2.5 rounded-lg text-white font-semibold transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center bg-red-600 hover:bg-red-700"
						(click)="deleteForever(ev.event_id)">
					<i class="fas fa-trash-alt"></i>
				</button>
			</div>
		</div>
	</div>
	<!-- Pagination -->
	<div *ngIf="!loading && !error && totalPages > 1" class="mx-2 lg:mx-6 mt-6 mb-8 flex justify-center">
		<nav class="inline-flex space-x-1" aria-label="Pagination">
			<button class="w-9 h-9 flex items-center justify-center rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50 transition-colors duration-150"
					[disabled]="currentPage === 1"
					(click)="changePage(currentPage - 1)">
				<i class="fas fa-chevron-left"></i>
			</button>
			<ng-container *ngFor="let page of [].constructor(totalPages); let i = index">
				<button class="w-9 h-9 flex items-center justify-center rounded transition-colors duration-150"
						[ngClass]="currentPage === (i + 1) ? 
							(isOsws ? 'gc-bg-admin text-white font-bold' : 'gc-bg-primary text-white font-bold') : 
							'bg-gray-200 hover:bg-gray-300 text-gray-800'"
						[attr.aria-current]="currentPage === (i + 1) ? 'page' : null"
						(click)="changePage(i + 1)">
					{{ i + 1 }}
				</button>
			</ng-container>
			<button class="w-9 h-9 flex items-center justify-center rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50 transition-colors duration-150"
					[disabled]="currentPage === totalPages"
					(click)="changePage(currentPage + 1)">
				<i class="fas fa-chevron-right"></i>
			</button>
		</nav>
	</div>
</div>
